

test = dir('*.mat');
for file = test
	fprintf(1,'Doing something with %s\n',file.name);
	nombre = file.name;
	datos = load(nombre);
	campos = fieldnames(datos);
	for index=1:size(campos,1)
		fprintf(1,'CAMPO %s\n',datos.campos{index});
		dlmwrite('FileName.csv', datos.campos{index}, 'newline','pc');
	end
end


test = dir('*.mat');
nombre = 'Rush_Test1_1_GD.mat';
if endsWith(nombre, '1_GD.mat')
	
	datos = load(nombre);
	campos = fieldnames(datos);
	for index=1:size(campos,1)
		if strcmpi(campos{index},'brakeCellSensor') || strcmpi(campos{index},  'brakeSensor') || strcmpi(campos{index},  'clutchSensor') || strcmpi(campos{index},  'DSAccelerating') || strcmpi(campos{index},  'DSAccelerationX') || strcmpi(campos{index},  'DSAccelerationY') || strcmpi(campos{index},  'DSAccelerationZ') || strcmpi(campos{index},  'DSBrake') || strcmpi(campos{index},  'DSBrakeOff') || strcmpi(campos{index},  'DSCloseToPrecedingCar') || strcmpi(campos{index},  'DSClutch') || strcmpi(campos{index},  'DSClutchOff') || strcmpi(campos{index},  'DSClutchOn') || strcmpi(campos{index},  'DSCollision') || strcmpi(campos{index},  'DSCurrentMaximumSpeed') || strcmpi(campos{index},  ' DSCurrentStrip') || strcmpi(campos{index},  ' DSDecelerating') || strcmpi(campos{index},  ' DSDistanceToFollowingCar') || strcmpi(campos{index},  ' DSDistanceToNextElement') || strcmpi(campos{index},  ' DSDistanceToPrecedingCar') || strcmpi(campos{index},  ' DSDrivingFasterThenRoadSpeed') || strcmpi(campos{index},  ' DSDrivingSlowerThenRoadSpeed') || strcmpi(campos{index},  ' DSGear') || strcmpi(campos{index},  ' DSHorn') || strcmpi(campos{index},  ' DSIndicator') || strcmpi(campos{index},  ' DSNearPrecedingCar') || strcmpi(campos{index},  ' DSParkingBrake') || strcmpi(campos{index},  ' DSPositionX') || strcmpi(campos{index},  ' DSPositionY') || strcmpi(campos{index},  ' DSPositionZ') || strcmpi(campos{index},  ' DSStripIndex') || strcmpi(campos{index},  ' DSStripsLeft') || strcmpi(campos{index},  ' DSStripsRight') || strcmpi(campos{index},  ' DSThrottle') || strcmpi(campos{index},  ' DSThrottleFull') || strcmpi(campos{index},  ' DSThrottleOff') || strcmpi(campos{index},  ' DSThrottleTooMuch') || strcmpi(campos{index},  ' DSTime') || strcmpi(campos{index},  ' DSTimeToPrecedingCar') || strcmpi(campos{index},  ' DSVelocityX') || strcmpi(campos{index},  ' DSVelocityY') || strcmpi(campos{index},  'DSVelocityZ') || strcmpi(campos{index},  'ECG') || strcmpi(campos{index}, 'Respiration')
			fprintf(1,'Archivo: %s\n',campos{index});
			dlmwrite('FileName.csv', datos.(campos{index}), 'newline','pc');
		end
	end
end


{'brakeCellSensor', 'brakeSensor', 'clutchSensor', 'Condition', 'DSAccelerating', 'DSAccelerationX', 'DSAccelerationY', 'DSAccelerationZ', 'DSApproachingMaximumSpeedChange', 'DSBrake', 'DSBrakeOff', 'DSCloseToPrecedingCar', 'DSClutch', 'DSClutchOff', 'DSClutchOn', 'DSCollision', 'DSCurrentMaximumSpeed', ' DSCurrentStrip', ' DSDecelerating', ' DSDistanceToFollowingCar', ' DSDistanceToNextElement', ' DSDistanceToPrecedingCar', ' DSDrivingFasterThenRoadSpeed', ' DSDrivingSlowerThenRoadSpeed', ' DSGear', ' DSHorn', ' DSIndicator', ' DSNearPrecedingCar', ' DSParkingBrake', ' DSPositionX', ' DSPositionY', ' DSPositionZ', ' DSStripIndex', ' DSStripsLeft', ' DSStripsRight', ' DSThrottle', ' DSThrottleFull', ' DSThrottleOff', ' DSThrottleTooMuch', ' DSTime', ' DSTimeToPrecedingCar', ' DSVelocityX', ' DSVelocityY', 'DSVelocityZ', 'ECG','Respiration'} 

prueba2 = rmfield(prueba, {'Acc_X_287','Acc_X_292','Acc_X_293','Acc_X_294','Acc_Y_287','Acc_Y_292','Acc_Y_293','Acc_Y_294','Acc_Z_287','Acc_Z_292','Acc_Z_293','Acc_Z_294','dataFolder','dataFolderConverted','DS_SE_FrameNumber','DSBackLeftRoadUser_Acceleration','DSBackLeftRoadUser_ChangingLane','DSBackLeftRoadUser_DistanceToStudent','DSBackLeftRoadUser_ID','DSBackLeftRoadUser_PositionX','DSBackLeftRoadUser_PositionZ','DSBackLeftRoadUser_PositionY','DSBackLeftRoadUser_Present','DSBackLeftRoadUser_Speed','DSBackRightRoadUser_Acceleration','DSBackRightRoadUser_ChangingLane','DSBackRightRoadUser_DistanceToStudent','DSBackRightRoadUser_ID','DSBackRightRoadUser_PositionX','DSBackRightRoadUser_PositionZ','DSBackRightRoadUser_PositionY','DSBackRightRoadUser_Present','DSBackRightRoadUser_Speed','DSCanMergeWithLeftLane','DSCanMergeWithLeftLaneEasily','DSCanMergeWithLeftLaneSpacely','DSCanMergeWithRightLane','DSCanMergeWithRightLaneEasily','DSCanMergeWithRightLaneSpacely','DSCurrentElementID','DSCurrentElementType','DSFollowingRoadUser_Acceleration','DSFollowingRoadUser_ChangingLane','DSFollowingRoadUser_DistanceToStudent','DSFollowingRoadUser_ID','DSFollowingRoadUser_PositionX','DSFollowingRoadUser_PositionY','DSFollowingRoadUser_PositionZ','DSFollowingRoadUser_Present','DSFollowingRoadUser_Speed','DSFrontLeftRoadUser_Acceleration','DSFrontLeftRoadUser_ChangingLane','DSFrontLeftRoadUser_DistanceToStudent','DSFrontLeftRoadUser_ID','DSFrontLeftRoadUser_PositionX','DSFrontLeftRoadUser_PositionY','DSFrontLeftRoadUser_Present','DSFrontLeftRoadUser_PositionZ','DSFrontLeftRoadUser_Speed','DSFrontRightRoadUser_Acceleration','DSFrontRightRoadUser_ChangingLane','DSFrontRightRoadUser_DistanceToStudent','DSFrontRightRoadUser_ID','DSFrontRightRoadUser_PositionX','DSFrontRightRoadUser_PositionY','DSFrontRightRoadUser_PositionZ','DSFrontRightRoadUser_Present','DSFrontRightRoadUser_Speed','DSPrecedingRoadUser_ChangingLane','DSPrecedingRoadUser_Acceleration','DSPrecedingRoadUser_DistanceToStudent','DSPrecedingRoadUser_ID','DSPrecedingRoadUser_PositionX','DSPrecedingRoadUser_PositionY','DSPrecedingRoadUser_PositionZ','DSPrecedingRoadUser_Present','DSPrecedingRoadUser_Speed','DSShouldSlowDownToMergeLeft','DSShouldSpeedUpToMergeLeft','DSShouldSlowDownToMergeRight','DSShouldSpeedUpToMergeRight','DSSlowerThanPrecedingCar','Folder2','Gyr_X_287','Gyr_X_292','Gyr_X_293','Gyr_X_294','Gyr_Y_287','Gyr_Y_292','Gyr_Y_293','Gyr_Y_294','Gyr_Z_287','Gyr_Z_293','Gyr_Z_292','Gyr_Z_294','Mag_X_287','Mag_X_292','Mag_X_293','Mag_X_294','Mag_Y_287','Mag_Y_292','Mag_Y_293','Mag_Y_294','Mag_Z_287','Mag_Z_292','Mag_Z_293','Mag_Z_294','OriInc_w_287','OriInc_w_292','OriInc_w_293','OriInc_w_294','OriInc_x_287','OriInc_x_292','OriInc_x_293','OriInc_x_294','OriInc_y_292','OriInc_y_287','OriInc_y_293','OriInc_y_294','OriInc_z_292','OriInc_z_287','OriInc_z_293','OriInc_z_294','Pitch_287','Pitch_292','Pitch_293','Pitch_294','Pressure_287','Pressure_292','Pressure_293','Pressure_294','Roll_287','Roll_292','Roll_293','Roll_294','steeringS1','steeringS2','steeringS3','steeringS4','steeringS5','steeringS6','steeringS7','steeringS8','steeringS9','VelInc_X_287','VelInc_X_292','VelInc_X_293','VelInc_X_294','VelInc_Y_292','VelInc_Y_287','VelInc_Y_293','VelInc_Y_294','VelInc_Z_287','VelInc_Z_292','VelInc_Z_293','VelInc_Z_294','Yaw_287','Yaw_292','Yaw_293','Yaw_294'})
strcmpi(campos{index},'brakeCellSensor') || strcmpi(campos{index},  'brakeSensor') || strcmpi(campos{index},  'clutchSensor') || strcmpi(campos{index},  'Condition') || strcmpi(campos{index},  'DSAccelerating') || strcmpi(campos{index},  'DSAccelerationX') || strcmpi(campos{index},  'DSAccelerationY') || strcmpi(campos{index},  'DSAccelerationZ') || strcmpi(campos{index},  'DSApproachingMaximumSpeedChange') || strcmpi(campos{index},  'DSBrake') || strcmpi(campos{index},  'DSBrakeOff') || strcmpi(campos{index},  'DSCloseToPrecedingCar') || strcmpi(campos{index},  'DSClutch') || strcmpi(campos{index},  'DSClutchOff') || strcmpi(campos{index},  'DSClutchOn') || strcmpi(campos{index},  'DSCollision') || strcmpi(campos{index},  'DSCurrentMaximumSpeed') || strcmpi(campos{index},  ' DSCurrentStrip') || strcmpi(campos{index},  ' DSDecelerating') || strcmpi(campos{index},  ' DSDistanceToFollowingCar') || strcmpi(campos{index},  ' DSDistanceToNextElement') || strcmpi(campos{index},  ' DSDistanceToPrecedingCar') || strcmpi(campos{index},  ' DSDrivingFasterThenRoadSpeed') || strcmpi(campos{index},  ' DSDrivingSlowerThenRoadSpeed') || strcmpi(campos{index},  ' DSGear') || strcmpi(campos{index},  ' DSHorn') || strcmpi(campos{index},  ' DSIndicator') || strcmpi(campos{index},  ' DSNearPrecedingCar') || strcmpi(campos{index},  ' DSParkingBrake') || strcmpi(campos{index},  ' DSPositionX') || strcmpi(campos{index},  ' DSPositionY') || strcmpi(campos{index},  ' DSPositionZ') || strcmpi(campos{index},  ' DSStripIndex') || strcmpi(campos{index},  ' DSStripsLeft') || strcmpi(campos{index},  ' DSStripsRight') || strcmpi(campos{index},  ' DSThrottle') || strcmpi(campos{index},  ' DSThrottleFull') || strcmpi(campos{index},  ' DSThrottleOff') || strcmpi(campos{index},  ' DSThrottleTooMuch') || strcmpi(campos{index},  ' DSTime') || strcmpi(campos{index},  ' DSTimeToPrecedingCar') || strcmpi(campos{index},  ' DSVelocityX') || strcmpi(campos{index},  ' DSVelocityY') || strcmpi(campos{index},  'DSVelocityZ') || strcmpi(campos{index},  'ECG') || strcmpi(campos{index}, 'Respiration')